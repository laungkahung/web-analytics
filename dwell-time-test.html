<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¡µé¢åœç•™æ—¶é—´ç²¾ç¡®æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .timer {
            font-size: 48px;
            font-weight: bold;
            color: #007cba;
            text-align: center;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }
        .small-timer {
            font-size: 24px;
            font-weight: bold;
            color: #28a745;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }
        .btn {
            background: #007cba;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
            transition: background 0.2s;
        }
        .btn:hover { background: #005a87; }
        .btn:disabled { background: #ccc; cursor: not-allowed; }
        .btn-success { background: #28a745; }
        .btn-warning { background: #ffc107; color: #000; }
        .btn-danger { background: #dc3545; }
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        .result-table th, .result-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        .result-table th {
            background: #f8f9fa;
            font-weight: bold;
        }
        .accuracy-good { color: #28a745; font-weight: bold; }
        .accuracy-warning { color: #ffc107; font-weight: bold; }
        .accuracy-bad { color: #dc3545; font-weight: bold; }
        .log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        .status {
            padding: 8px 16px;
            border-radius: 4px;
            margin: 10px 0;
            font-weight: bold;
        }
        .status-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .status-warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .status-danger { background: #f8d7da; color: #721c24; border: 1px solid #f1c2c7; }
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        @media (max-width: 768px) {
            .grid { grid-template-columns: 1fr; }
            .timer { font-size: 36px; }
        }
    </style>
</head>
<body>
    <h1>â±ï¸ é¡µé¢åœç•™æ—¶é—´ç²¾ç¡®æµ‹è¯•</h1>

    <div class="status status-warning" id="sdk-status">
        SDKçŠ¶æ€: æœªåˆå§‹åŒ–
    </div>

    <!-- ä¸»è¦è®¡æ—¶å™¨ -->
    <div class="test-card">
        <h2>ğŸ¯ ä¸»è®¡æ—¶å™¨</h2>
        <div class="timer" id="main-timer">00:00:00</div>
        <div style="text-align: center;">
            <button class="btn" onclick="initializeSDK()">åˆå§‹åŒ–SDK</button>
            <button class="btn btn-success" onclick="startMainTest()" id="start-btn">å¼€å§‹æµ‹è¯•</button>
            <button class="btn btn-warning" onclick="pauseTest()" id="pause-btn" disabled>æš‚åœ</button>
            <button class="btn btn-danger" onclick="stopTest()" id="stop-btn" disabled>åœæ­¢å¹¶è®°å½•</button>
        </div>
        <div class="status" id="test-status">
            ç‚¹å‡»"å¼€å§‹æµ‹è¯•"å¼€å§‹è®¡æ—¶
        </div>
    </div>

    <div class="grid">
        <!-- è‡ªåŠ¨åŒ–æµ‹è¯• -->
        <div class="test-card">
            <h3>ğŸ¤– è‡ªåŠ¨åŒ–ç²¾åº¦æµ‹è¯•</h3>
            <div>
                <label>æµ‹è¯•æ—¶é•¿ (ç§’): <input type="number" id="auto-duration" value="5" min="1" max="60"></label>
            </div>
            <div>
                <label>æµ‹è¯•æ¬¡æ•°: <input type="number" id="test-count" value="3" min="1" max="10"></label>
            </div>
            <button class="btn" onclick="runAutomatedTests()">è¿è¡Œè‡ªåŠ¨æµ‹è¯•</button>
            <div class="small-timer" id="auto-timer">å¾…å¼€å§‹</div>
            <div id="auto-progress"></div>
        </div>

        <!-- è¾¹ç•Œæƒ…å†µæµ‹è¯• -->
        <div class="test-card">
            <h3>ğŸ” è¾¹ç•Œæƒ…å†µæµ‹è¯•</h3>
            <button class="btn" onclick="testShortDuration()">è¶…çŸ­æ—¶é•¿ (100ms)</button>
            <button class="btn" onclick="testLongDuration()">è¶…é•¿æ—¶é•¿ (æ¨¡æ‹Ÿ)</button>
            <button class="btn" onclick="testNegativeDuration()">è´Ÿæ•°æ—¶é•¿</button>
            <button class="btn" onclick="testZeroDuration()">é›¶æ—¶é•¿</button>
            <button class="btn" onclick="testRapidToggle()">å¿«é€Ÿåˆ‡æ¢</button>
        </div>
    </div>

    <!-- æµ‹è¯•ç»“æœ -->
    <div class="test-card">
        <h2>ğŸ“Š æµ‹è¯•ç»“æœ</h2>
        <table class="result-table" id="results-table">
            <thead>
                <tr>
                    <th>æµ‹è¯•ç±»å‹</th>
                    <th>é¢„æœŸæ—¶é•¿</th>
                    <th>å®é™…æ—¶é•¿</th>
                    <th>SDKè®°å½•</th>
                    <th>è¯¯å·®</th>
                    <th>å‡†ç¡®åº¦</th>
                    <th>æ—¶é—´æˆ³</th>
                </tr>
            </thead>
            <tbody id="results-body">
            </tbody>
        </table>
        <div style="margin-top: 15px;">
            <button class="btn" onclick="clearResults()">æ¸…ç©ºç»“æœ</button>
            <button class="btn" onclick="exportResults()">å¯¼å‡ºæ•°æ®</button>
            <button class="btn" onclick="showStatistics()">æ˜¾ç¤ºç»Ÿè®¡</button>
        </div>
    </div>

    <!-- å®æ—¶æ—¥å¿— -->
    <div class="test-card">
        <h3>ğŸ“ å®æ—¶æ—¥å¿—</h3>
        <button class="btn" onclick="clearLog()">æ¸…ç©ºæ—¥å¿—</button>
        <div class="log" id="log-container"></div>
    </div>

    <script src="./analytics.js"></script>
    <script>
        // å…¨å±€å˜é‡
        let testStartTime = null;
        let testTimer = null;
        let isPaused = false;
        let pausedDuration = 0;
        let testResults = [];
        let autoTestRunning = false;
        let sdkInitialized = false;

        // æ—¥å¿—å‡½æ•°
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logContainer = document.getElementById('log-container');
            const colors = {
                info: '#333',
                success: '#28a745',
                warning: '#ffc107',
                error: '#dc3545'
            };
            
            logContainer.innerHTML += `<div style="color: ${colors[type]}">[${timestamp}] ${message}</div>`;
            logContainer.scrollTop = logContainer.scrollHeight;
            console.log(`[${type.toUpperCase()}] ${message}`);
        }

        // åˆå§‹åŒ–SDK
        function initializeSDK() {
            try {
                if (typeof Analytics === 'undefined') {
                    throw new Error('Analytics SDK æœªåŠ è½½');
                }

                Analytics.init({
                    appId: 'dwell-time-test',
                    endpoint: 'http://localhost:8080/collect',
                    debug: true,
                    isSPA: true,
                    uploadType: 'batch'
                });

                sdkInitialized = true;
                document.getElementById('sdk-status').className = 'status status-success';
                document.getElementById('sdk-status').textContent = 'SDKçŠ¶æ€: å·²åˆå§‹åŒ–å¹¶å¯ç”¨è°ƒè¯•æ¨¡å¼';
                log('âœ… SDKåˆå§‹åŒ–æˆåŠŸ', 'success');
            } catch (error) {
                document.getElementById('sdk-status').className = 'status status-danger';
                document.getElementById('sdk-status').textContent = 'SDKçŠ¶æ€: åˆå§‹åŒ–å¤±è´¥ - ' + error.message;
                log('âŒ SDKåˆå§‹åŒ–å¤±è´¥: ' + error.message, 'error');
            }
        }

        // æ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤º
        function formatTime(milliseconds) {
            const totalSeconds = Math.floor(milliseconds / 1000);
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;
            const ms = milliseconds % 1000;
            
            if (hours > 0) {
                return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            } else {
                return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}.${Math.floor(ms/100)}`;
            }
        }

        // å¼€å§‹ä¸»æµ‹è¯•
        function startMainTest() {
            if (!sdkInitialized) {
                alert('è¯·å…ˆåˆå§‹åŒ–SDK');
                return;
            }

            testStartTime = Date.now();
            pausedDuration = 0;
            isPaused = false;

            // è®¾ç½®SDKçš„é¡µé¢å¼€å§‹æ—¶é—´
            Analytics.session.pageStartTime = testStartTime;

            // å¼€å§‹è®¡æ—¶å™¨
            testTimer = setInterval(updateTimer, 100);

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.getElementById('start-btn').disabled = true;
            document.getElementById('pause-btn').disabled = false;
            document.getElementById('stop-btn').disabled = false;
            
            document.getElementById('test-status').className = 'status status-success';
            document.getElementById('test-status').textContent = 'æµ‹è¯•è¿›è¡Œä¸­...';

            log('ğŸš€ å¼€å§‹ä¸»æµ‹è¯•è®¡æ—¶', 'success');
        }

        // æ›´æ–°è®¡æ—¶å™¨æ˜¾ç¤º
        function updateTimer() {
            if (!isPaused && testStartTime) {
                const elapsed = Date.now() - testStartTime - pausedDuration;
                document.getElementById('main-timer').textContent = formatTime(elapsed);
            }
        }

        // æš‚åœæµ‹è¯•
        function pauseTest() {
            if (isPaused) {
                // æ¢å¤
                const pauseStart = Date.now();
                isPaused = false;
                testTimer = setInterval(updateTimer, 100);
                document.getElementById('pause-btn').textContent = 'æš‚åœ';
                document.getElementById('test-status').textContent = 'æµ‹è¯•è¿›è¡Œä¸­...';
                log('â–¶ï¸ æµ‹è¯•å·²æ¢å¤', 'info');
            } else {
                // æš‚åœ
                isPaused = true;
                clearInterval(testTimer);
                document.getElementById('pause-btn').textContent = 'æ¢å¤';
                document.getElementById('test-status').textContent = 'æµ‹è¯•å·²æš‚åœ';
                log('â¸ï¸ æµ‹è¯•å·²æš‚åœ', 'warning');
            }
        }

        // åœæ­¢æµ‹è¯•å¹¶è®°å½•ç»“æœ
        function stopTest() {
            if (!testStartTime) return;

            const actualDuration = Date.now() - testStartTime - pausedDuration;
            
            // è§¦å‘SDKè®°å½•
            Analytics.trackPageLeave();

            // è·å–SDKè®°å½•çš„æ—¶é•¿
            setTimeout(() => {
                const queue = Analytics.eventQueue;
                let sdkDuration = null;
                
                for (const event of queue) {
                    if (event.session_duration !== undefined) {
                        sdkDuration = event.session_duration;
                        break;
                    }
                }

                // è®°å½•ç»“æœ
                recordTestResult('æ‰‹åŠ¨æµ‹è¯•', actualDuration, sdkDuration, actualDuration);

                // é‡ç½®çŠ¶æ€
                resetTest();
                log(`âœ… æµ‹è¯•å®Œæˆ - å®é™…: ${Math.floor(actualDuration/1000)}s, SDK: ${sdkDuration ? Math.floor(sdkDuration/1000) + 's' : 'æœªè®°å½•'}`, 'success');
            }, 100);
        }

        // é‡ç½®æµ‹è¯•çŠ¶æ€
        function resetTest() {
            clearInterval(testTimer);
            testStartTime = null;
            isPaused = false;
            pausedDuration = 0;

            document.getElementById('main-timer').textContent = '00:00:00';
            document.getElementById('start-btn').disabled = false;
            document.getElementById('pause-btn').disabled = true;
            document.getElementById('pause-btn').textContent = 'æš‚åœ';
            document.getElementById('stop-btn').disabled = true;
            
            document.getElementById('test-status').className = 'status';
            document.getElementById('test-status').textContent = 'ç‚¹å‡»"å¼€å§‹æµ‹è¯•"å¼€å§‹è®¡æ—¶';
        }

        // è‡ªåŠ¨åŒ–æµ‹è¯•
        async function runAutomatedTests() {
            if (!sdkInitialized) {
                alert('è¯·å…ˆåˆå§‹åŒ–SDK');
                return;
            }

            if (autoTestRunning) {
                log('âŒ è‡ªåŠ¨æµ‹è¯•æ­£åœ¨è¿›è¡Œä¸­', 'warning');
                return;
            }

            const duration = parseInt(document.getElementById('auto-duration').value) * 1000;
            const count = parseInt(document.getElementById('test-count').value);
            
            autoTestRunning = true;
            log(`ğŸ¤– å¼€å§‹è‡ªåŠ¨åŒ–æµ‹è¯•: ${count}æ¬¡, æ¯æ¬¡${duration/1000}ç§’`, 'info');

            for (let i = 1; i <= count; i++) {
                document.getElementById('auto-progress').textContent = `æµ‹è¯•è¿›åº¦: ${i}/${count}`;
                
                await runSingleAutoTest(duration, i);
                
                if (i < count) {
                    // æµ‹è¯•é—´éš”
                    await sleep(1000);
                }
            }

            autoTestRunning = false;
            document.getElementById('auto-timer').textContent = 'æµ‹è¯•å®Œæˆ';
            document.getElementById('auto-progress').textContent = '';
            log('âœ… è‡ªåŠ¨åŒ–æµ‹è¯•å…¨éƒ¨å®Œæˆ', 'success');
        }

        // å•æ¬¡è‡ªåŠ¨æµ‹è¯•
        function runSingleAutoTest(duration, testNumber) {
            return new Promise((resolve) => {
                const startTime = Date.now();
                Analytics.session.pageStartTime = startTime;

                // æ›´æ–°æ˜¾ç¤º
                let elapsed = 0;
                const displayTimer = setInterval(() => {
                    elapsed = Date.now() - startTime;
                    document.getElementById('auto-timer').textContent = formatTime(elapsed);
                }, 100);

                setTimeout(() => {
                    clearInterval(displayTimer);
                    const actualDuration = Date.now() - startTime;
                    
                    // è§¦å‘SDKè®°å½•
                    Analytics.trackPageLeave();

                    // è·å–ç»“æœ
                    setTimeout(() => {
                        const queue = Analytics.eventQueue;
                        let sdkDuration = null;
                        
                        for (const event of queue.slice(-1)) { // è·å–æœ€åä¸€ä¸ªäº‹ä»¶
                            if (event.session_duration !== undefined) {
                                sdkDuration = event.session_duration;
                                break;
                            }
                        }

                        recordTestResult(`è‡ªåŠ¨æµ‹è¯•${testNumber}`, duration, sdkDuration, actualDuration);
                        resolve();
                    }, 100);
                }, duration);
            });
        }

        // è¾¹ç•Œæƒ…å†µæµ‹è¯•
        function testShortDuration() {
            if (!sdkInitialized) return;
            
            const startTime = Date.now();
            Analytics.session.pageStartTime = startTime;
            
            setTimeout(() => {
                const actualDuration = Date.now() - startTime;
                Analytics.trackPageLeave();
                
                setTimeout(() => {
                    const queue = Analytics.eventQueue;
                    let sdkDuration = null;
                    for (const event of queue.slice(-1)) {
                        if (event.session_duration !== undefined) {
                            sdkDuration = event.session_duration;
                            break;
                        }
                    }
                    recordTestResult('è¶…çŸ­æ—¶é•¿', 100, sdkDuration, actualDuration);
                    log('âš¡ è¶…çŸ­æ—¶é•¿æµ‹è¯•å®Œæˆ', 'info');
                }, 50);
            }, 100);
        }

        function testLongDuration() {
            if (!sdkInitialized) return;
            
            // æ¨¡æ‹Ÿ25å°æ—¶å‰å¼€å§‹
            const longAgo = Date.now() - (25 * 60 * 60 * 1000);
            Analytics.session.pageStartTime = longAgo;
            Analytics.trackPageLeave();
            
            setTimeout(() => {
                const queue = Analytics.eventQueue;
                let sdkDuration = null;
                for (const event of queue.slice(-1)) {
                    if (event.session_duration !== undefined) {
                        sdkDuration = event.session_duration;
                        break;
                    }
                }
                recordTestResult('è¶…é•¿æ—¶é•¿', 25 * 60 * 60 * 1000, sdkDuration, 25 * 60 * 60 * 1000);
                log('ğŸ•’ è¶…é•¿æ—¶é•¿æµ‹è¯•å®Œæˆï¼ˆåº”è¢«é™åˆ¶åœ¨24å°æ—¶ï¼‰', 'info');
            }, 50);
        }

        function testNegativeDuration() {
            if (!sdkInitialized) return;
            
            // è®¾ç½®æœªæ¥æ—¶é—´
            const futureTime = Date.now() + 10000;
            Analytics.session.pageStartTime = futureTime;
            Analytics.trackPageLeave();
            
            setTimeout(() => {
                const queue = Analytics.eventQueue;
                let sdkDuration = null;
                for (const event of queue.slice(-1)) {
                    if (event.session_duration !== undefined) {
                        sdkDuration = event.session_duration;
                        break;
                    }
                }
                recordTestResult('è´Ÿæ•°æ—¶é•¿', 0, sdkDuration, -10000);
                log('â– è´Ÿæ•°æ—¶é•¿æµ‹è¯•å®Œæˆï¼ˆåº”è¢«å¤„ç†ä¸º0ï¼‰', 'info');
            }, 50);
        }

        function testZeroDuration() {
            if (!sdkInitialized) return;
            
            const now = Date.now();
            Analytics.session.pageStartTime = now;
            Analytics.trackPageLeave();
            
            setTimeout(() => {
                const queue = Analytics.eventQueue;
                let sdkDuration = null;
                for (const event of queue.slice(-1)) {
                    if (event.session_duration !== undefined) {
                        sdkDuration = event.session_duration;
                        break;
                    }
                }
                recordTestResult('é›¶æ—¶é•¿', 0, sdkDuration, 0);
                log('0ï¸âƒ£ é›¶æ—¶é•¿æµ‹è¯•å®Œæˆ', 'info');
            }, 50);
        }

        function testRapidToggle() {
            if (!sdkInitialized) return;
            
            log('ğŸ”„ å¼€å§‹å¿«é€Ÿåˆ‡æ¢æµ‹è¯•...', 'info');
            let count = 0;
            const interval = setInterval(() => {
                Analytics.session.pageStartTime = Date.now();
                Analytics.trackPageLeave();
                count++;
                
                if (count >= 5) {
                    clearInterval(interval);
                    log('âœ… å¿«é€Ÿåˆ‡æ¢æµ‹è¯•å®Œæˆï¼Œæ£€æŸ¥é˜²æŠ–æ•ˆæœ', 'success');
                }
            }, 50);
        }

        // è®°å½•æµ‹è¯•ç»“æœ
        function recordTestResult(testType, expectedDuration, sdkDuration, actualDuration) {
            const error = sdkDuration !== null ? Math.abs(sdkDuration - actualDuration) : null;
            const accuracy = error !== null ? Math.max(0, (1 - error / Math.max(actualDuration, expectedDuration)) * 100) : null;
            
            const result = {
                testType,
                expectedDuration,
                actualDuration,
                sdkDuration,
                error,
                accuracy,
                timestamp: new Date().toISOString()
            };

            testResults.push(result);
            updateResultsTable();
        }

        // æ›´æ–°ç»“æœè¡¨æ ¼
        function updateResultsTable() {
            const tbody = document.getElementById('results-body');
            tbody.innerHTML = '';

            testResults.forEach(result => {
                const row = tbody.insertRow();
                
                const accuracyClass = result.accuracy !== null ? 
                    (result.accuracy >= 95 ? 'accuracy-good' : 
                     result.accuracy >= 80 ? 'accuracy-warning' : 'accuracy-bad') : '';

                row.innerHTML = `
                    <td>${result.testType}</td>
                    <td>${result.expectedDuration ? Math.floor(result.expectedDuration / 1000) + 's' : '-'}</td>
                    <td>${Math.floor(result.actualDuration / 1000)}s</td>
                    <td>${result.sdkDuration !== null ? Math.floor(result.sdkDuration / 1000) + 's' : 'æœªè®°å½•'}</td>
                    <td>${result.error !== null ? Math.floor(result.error) + 'ms' : '-'}</td>
                    <td class="${accuracyClass}">${result.accuracy !== null ? result.accuracy.toFixed(1) + '%' : '-'}</td>
                    <td>${new Date(result.timestamp).toLocaleTimeString()}</td>
                `;
            });
        }

        // è¾…åŠ©å‡½æ•°
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function clearResults() {
            testResults = [];
            updateResultsTable();
            log('ğŸ§¹ æµ‹è¯•ç»“æœå·²æ¸…ç©º', 'info');
        }

        function clearLog() {
            document.getElementById('log-container').innerHTML = '';
        }

        function exportResults() {
            const data = {
                summary: {
                    totalTests: testResults.length,
                    timestamp: new Date().toISOString(),
                    userAgent: navigator.userAgent,
                    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone
                },
                results: testResults
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `dwell-time-test-${Date.now()}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            log('ğŸ“¤ æµ‹è¯•æ•°æ®å·²å¯¼å‡º', 'success');
        }

        function showStatistics() {
            if (testResults.length === 0) {
                alert('æš‚æ— æµ‹è¯•æ•°æ®');
                return;
            }

            const validResults = testResults.filter(r => r.accuracy !== null);
            if (validResults.length === 0) {
                alert('æš‚æ— æœ‰æ•ˆçš„å‡†ç¡®åº¦æ•°æ®');
                return;
            }

            const avgAccuracy = validResults.reduce((sum, r) => sum + r.accuracy, 0) / validResults.length;
            const minAccuracy = Math.min(...validResults.map(r => r.accuracy));
            const maxAccuracy = Math.max(...validResults.map(r => r.accuracy));
            const avgError = validResults.reduce((sum, r) => sum + r.error, 0) / validResults.length;

            alert(`æµ‹è¯•ç»Ÿè®¡ä¿¡æ¯ï¼š
æ€»æµ‹è¯•æ•°: ${testResults.length}
æœ‰æ•ˆæµ‹è¯•: ${validResults.length}
å¹³å‡å‡†ç¡®åº¦: ${avgAccuracy.toFixed(2)}%
æœ€ä½å‡†ç¡®åº¦: ${minAccuracy.toFixed(2)}%
æœ€é«˜å‡†ç¡®åº¦: ${maxAccuracy.toFixed(2)}%
å¹³å‡è¯¯å·®: ${Math.floor(avgError)}ms`);
        }

        // é¡µé¢åŠ è½½å®Œæˆ
        document.addEventListener('DOMContentLoaded', function() {
            log('â±ï¸ é¡µé¢åœç•™æ—¶é—´æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ', 'success');
            log('ğŸ’¡ è¯·å…ˆç‚¹å‡»"åˆå§‹åŒ–SDK"å¼€å§‹æµ‹è¯•', 'info');
        });
    </script>
</body>
</html>